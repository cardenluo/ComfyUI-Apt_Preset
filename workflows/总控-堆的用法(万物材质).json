{"id":"710fdb08-cb05-4778-b87d-a9dacb8b8b1f","revision":0,"last_node_id":36,"last_link_id":33,"nodes":[{"id":9,"type":"MaskBlur+","pos":[-805.7474975585938,969.2655639648438],"size":[270,82],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":null},{"localized_name":"amount","name":"amount","type":"INT","widget":{"name":"amount"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","links":[2]}],"properties":{"Node name for S&R":"MaskBlur+","widget_ue_connectable":{"amount":true,"device":true}},"widgets_values":[6,"auto"]},{"id":10,"type":"DifferentialDiffusion","pos":[-444.25537109375,958.9447631835938],"size":[216.77987670898438,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"strength","name":"strength","shape":7,"type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"DifferentialDiffusion","widget_ue_connectable":{}},"widgets_values":[1]},{"id":11,"type":"latent_ratio","pos":[-801.7350463867188,1174.6077880859375],"size":[260,82],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"ratio_selected","name":"ratio_selected","type":"COMBO","widget":{"name":"ratio_selected"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[3]}],"properties":{"Node name for S&R":"latent_ratio","widget_ue_connectable":{"ratio_selected":true,"batch_size":true}},"widgets_values":["[512x384]AD",1]},{"id":12,"type":"Note","pos":[-1471.79443359375,961.7705688476562],"size":[350.65289306640625,360.3795166015625],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["集成了所有latent的基础操作\n\n1)latent没有任何操作，就会从context中获取前面的latent\n2)当latent有输入时，则按照输入的数据\n3)当有像素(可选遮罩)输入时，则会自动编码成新的latent ,\n4)当没有输入，但是有\"选择比例\"时,则相当于空latent的输入\n5)差异扩散，用布尔开关决定要不要添加进去(有些模型会影响生成效果"],"color":"#432","bgcolor":"#653"},{"id":13,"type":"sum_latent","pos":[-1107.9459228515625,966.6226196289062],"size":[260,214],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null},{"localized_name":"pixels","name":"pixels","shape":7,"type":"IMAGE","link":null},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"noise_mask","name":"noise_mask","shape":7,"type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null},{"localized_name":"diff_difusion","name":"diff_difusion","shape":7,"type":"BOOLEAN","widget":{"name":"diff_difusion"},"link":null},{"localized_name":"smoothness","name":"smoothness","shape":7,"type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"ratio_selected","name":"ratio_selected","shape":7,"type":"COMBO","widget":{"name":"ratio_selected"},"link":null},{"localized_name":"batch_size","name":"batch_size","shape":7,"type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"sum_latent","widget_ue_connectable":{"noise_mask":true,"diff_difusion":true,"smoothness":true,"ratio_selected":true,"batch_size":true}},"widgets_values":[true,true,1,"None",1]},{"id":14,"type":"InpaintModelConditioning","pos":[-446.32666015625,1041.1376953125],"size":[270,138],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null},{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":1},{"localized_name":"mask","name":"mask","type":"MASK","link":2},{"localized_name":"noise_mask","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[]},{"localized_name":"latent","name":"latent","type":"LATENT","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"InpaintModelConditioning","widget_ue_connectable":{"noise_mask":true}},"widgets_values":[true]},{"id":15,"type":"VAEDecode","pos":[-440.074951171875,1245.38525390625],"size":[140,46],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":3},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[1]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":7,"type":"sum_stack_Wan","pos":[-2307.4765625,1630.5931396484375],"size":[260,446],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":null},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"funControl","name":"funControl","shape":7,"type":"FUNCONTROL","link":null},{"localized_name":"funControl22","name":"funControl22","shape":7,"type":"FUNCONTROL22","link":null},{"localized_name":"funInpaint","name":"funInpaint","shape":7,"type":"FUNINPAINT","link":null},{"localized_name":"ImageToVideo","name":"ImageToVideo","shape":7,"type":"IMAGETOVIDEO","link":null},{"localized_name":"FirstLastFrame","name":"FirstLastFrame","shape":7,"type":"FIRSTLASTFRAME","link":null},{"localized_name":"Vace","name":"Vace","shape":7,"type":"WANVACE","link":null},{"localized_name":"AnimateVideo","name":"AnimateVideo","shape":7,"type":"ANIMATEVIDEO","link":null},{"localized_name":"CameraImage","name":"CameraImage","shape":7,"type":"CAMERAIMAGE","link":null},{"localized_name":"Track","name":"Track","shape":7,"type":"WANTRACKT","link":null},{"localized_name":"SoundImage","name":"SoundImage","shape":7,"type":"SOUNDIMAGE","link":null},{"localized_name":"SoundImage_ex","name":"SoundImage_ex","shape":7,"type":"SOUNDIMAGE_EX","link":null},{"localized_name":"HuMoImage","name":"HuMoImage","shape":7,"type":"HUMOIMAGE","link":null},{"localized_name":"Phantom","name":"Phantom","shape":7,"type":"PHANTOM","link":null},{"localized_name":"正条件","name":"positive","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"负条件","name":"negative","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"图生视频","name":"Image_2V","shape":7,"type":"IMAGE_2V","link":null},{"localized_name":"vace_2V","name":"vace_2V","shape":7,"type":"VACE_2V","link":null},{"localized_name":"可控视频","name":"FunControl_2V","shape":7,"type":"FCTL_2V","link":null},{"localized_name":"首尾帧视频","name":"FirstLast_2V","shape":7,"type":"FFL_2V","link":null},{"localized_name":"cameral_2V","name":"cameral_2V","shape":7,"type":"CAME_2V","link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"vace_trim_latent","name":"vace_trim_latent","type":"INT","links":null},{"localized_name":"trim_image","name":"trim_image","type":"INT","links":null},{"localized_name":"video_frame_offset","name":"video_frame_offset","type":"INT","links":null}],"properties":{"Node name for S&R":"sum_stack_Wan","widget_ue_connectable":{}},"widgets_values":[]},{"id":4,"type":"sum_lora","pos":[-2606.106689453125,1626.4998779296875],"size":[260,320],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"context","name":"context","shape":7,"type":"RUN_CONTEXT","link":null},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"clip","name":"clip","shape":7,"type":"CLIP","link":null},{"localized_name":"lora_01","name":"lora_01","type":"COMBO","widget":{"name":"lora_01"},"link":null},{"localized_name":"strength_01","name":"strength_01","type":"FLOAT","widget":{"name":"strength_01"},"link":null},{"localized_name":"lora_02","name":"lora_02","type":"COMBO","widget":{"name":"lora_02"},"link":null},{"localized_name":"strength_02","name":"strength_02","type":"FLOAT","widget":{"name":"strength_02"},"link":null},{"localized_name":"lora_03","name":"lora_03","type":"COMBO","widget":{"name":"lora_03"},"link":null},{"localized_name":"strength_03","name":"strength_03","type":"FLOAT","widget":{"name":"strength_03"},"link":null},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null},{"localized_name":"neg","name":"neg","shape":7,"type":"STRING","widget":{"name":"neg"},"link":null},{"localized_name":"style","name":"style","shape":7,"type":"COMBO","widget":{"name":"style"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null}],"properties":{"Node name for S&R":"sum_lora","widget_ue_connectable":{"lora_01":true,"strength_01":true,"lora_02":true,"strength_02":true,"lora_03":true,"strength_03":true,"pos":true,"neg":true,"style":true}},"widgets_values":["None",1,"None",1,"None",1,"","","None"]},{"id":8,"type":"sum_stack_AD","pos":[-2310.172119140625,1890.657470703125],"size":[260,186],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":null},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"chx_Merge","name":"chx_Merge","shape":7,"type":"RUN_CONTEXT","link":null},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"ipa_stack","name":"ipa_stack","shape":7,"type":"IPA_STACK","link":null},{"localized_name":"pos_sch_stack","name":"pos_sch_stack","shape":7,"type":"PROMPT_SCHEDULE_STACK","link":null},{"localized_name":"cn_stack","name":"cn_stack","shape":7,"type":"CN_STACK","link":null},{"localized_name":"latent_stack","name":"latent_stack","shape":7,"type":"LATENT_STACK","link":null},{"localized_name":"正条件","name":"positive","shape":7,"type":"CONDITIONING","link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"graph","name":"graph","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"sum_stack_AD","widget_ue_connectable":{}},"widgets_values":[]},{"id":6,"type":"sum_stack_image","pos":[-2019.31494140625,1633.2552490234375],"size":[260,266],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":null},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"ipa_stack","name":"ipa_stack","shape":7,"type":"IPA_STACK","link":null},{"localized_name":"redux_stack","name":"redux_stack","shape":7,"type":"REDUX_STACK","link":null},{"localized_name":"condi_stack","name":"condi_stack","shape":7,"type":"STACK_CONDI","link":null},{"localized_name":"union_stack","name":"union_stack","shape":7,"type":"UNION_STACK","link":null},{"localized_name":"cn_stack","name":"cn_stack","shape":7,"type":"CN_STACK","link":null},{"localized_name":"inpaint","name":"inpaint","shape":7,"type":"INPAINT_STACK","link":null},{"localized_name":"latent_stack","name":"latent_stack","shape":7,"type":"LATENT_STACK","link":null},{"localized_name":"正条件","name":"positive","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"ipa3堆","name":"ipa3_stack","shape":7,"type":"IPA3_STACK","link":null},{"localized_name":"text堆","name":"text_stack","shape":7,"type":"TEXT_STACK","link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"vae","name":"vae","type":"VAE","links":null},{"localized_name":"clip","name":"clip","type":"CLIP","links":null}],"properties":{"Node name for S&R":"sum_stack_image","widget_ue_connectable":{}},"widgets_values":[]},{"id":16,"type":"sum_latent","pos":[-2013.899169921875,1950.5277099609375],"size":[260,214],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null},{"localized_name":"pixels","name":"pixels","shape":7,"type":"IMAGE","link":null},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"noise_mask","name":"noise_mask","shape":7,"type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null},{"localized_name":"diff_difusion","name":"diff_difusion","shape":7,"type":"BOOLEAN","widget":{"name":"diff_difusion"},"link":null},{"localized_name":"smoothness","name":"smoothness","shape":7,"type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"ratio_selected","name":"ratio_selected","shape":7,"type":"COMBO","widget":{"name":"ratio_selected"},"link":null},{"localized_name":"batch_size","name":"batch_size","shape":7,"type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"sum_latent","widget_ue_connectable":{"noise_mask":true,"diff_difusion":true,"smoothness":true,"ratio_selected":true,"batch_size":true}},"widgets_values":[true,true,1,"None",1]},{"id":5,"type":"sum_stack_all","pos":[-1684.696533203125,1634.7198486328125],"size":[260,126],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":null},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"stack_pack","name":"stack_pack","shape":7,"type":"STACK_PACK","link":4},{"localized_name":"正条件","name":"positive","shape":7,"type":"CONDITIONING","link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"image","name":"image","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"sum_stack_all","widget_ue_connectable":{}},"widgets_values":[]},{"id":17,"type":"stack_sum_pack","pos":[-1684.7626953125,1824.0399169921875],"size":[260,186],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"ipa_stack","name":"ipa_stack","shape":7,"type":"IPA_STACK","link":null},{"localized_name":"redux_stack","name":"redux_stack","shape":7,"type":"REDUX_STACK","link":null},{"localized_name":"condi_stack","name":"condi_stack","shape":7,"type":"STACK_CONDI","link":null},{"localized_name":"cn_stack","name":"cn_stack","shape":7,"type":"CN_STACK","link":null},{"localized_name":"union_stack","name":"union_stack","shape":7,"type":"UNION_STACK","link":null},{"localized_name":"latent_stack","name":"latent_stack","shape":7,"type":"LATENT_STACK","link":null},{"localized_name":"ipa3堆","name":"ipa3_stack","shape":7,"type":"IPA3_STACK","link":null},{"localized_name":"提示词堆","name":"text_stack","shape":7,"type":"TEXT_STACK","link":null}],"outputs":[{"localized_name":"stack_pack","name":"stack_pack","type":"STACK_PACK","links":[4]}],"properties":{"Node name for S&R":"stack_sum_pack","widget_ue_connectable":{}},"widgets_values":[]},{"id":19,"type":"LoadImage","pos":[-1176.127685546875,2964.72509765625],"size":[315,314.0000305175781],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"LoadImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["easyPreview_temp_cvisq_00001_.png","image"]},{"id":22,"type":"sum_load_adv","pos":[-463.063720703125,1663.6717529296875],"size":[311.4975891113281,620.7050170898438],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"over_model","name":"over_model","shape":7,"type":"MODEL","link":null},{"localized_name":"over_clip","name":"over_clip","shape":7,"type":"CLIP","link":null},{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"preset","name":"preset","shape":7,"type":"COMBO","widget":{"name":"preset"},"link":null},{"localized_name":"ckpt_name","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"unet_name","name":"unet_name","shape":7,"type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"unet_Weight_Dtype","name":"unet_Weight_Dtype","shape":7,"type":"COMBO","widget":{"name":"unet_Weight_Dtype"},"link":null},{"localized_name":"clip_type","name":"clip_type","shape":7,"type":"COMBO","widget":{"name":"clip_type"},"link":null},{"localized_name":"clip1","name":"clip1","shape":7,"type":"COMBO","widget":{"name":"clip1"},"link":null},{"localized_name":"clip2","name":"clip2","shape":7,"type":"COMBO","widget":{"name":"clip2"},"link":null},{"localized_name":"guidance","name":"guidance","shape":7,"type":"FLOAT","widget":{"name":"guidance"},"link":null},{"localized_name":"clip3","name":"clip3","shape":7,"type":"COMBO","widget":{"name":"clip3"},"link":null},{"localized_name":"clip4","name":"clip4","shape":7,"type":"COMBO","widget":{"name":"clip4"},"link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"COMBO","widget":{"name":"vae"},"link":null},{"localized_name":"lora","name":"lora","shape":7,"type":"COMBO","widget":{"name":"lora"},"link":null},{"localized_name":"lora_strength","name":"lora_strength","shape":7,"type":"FLOAT","widget":{"name":"lora_strength"},"link":null},{"localized_name":"width","name":"width","shape":7,"type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","shape":7,"type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"steps","name":"steps","shape":7,"type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","shape":7,"type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler","name":"sampler","shape":7,"type":"COMBO","widget":{"name":"sampler"},"link":null},{"localized_name":"scheduler","name":"scheduler","shape":7,"type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null},{"localized_name":"neg","name":"neg","shape":7,"type":"STRING","widget":{"name":"neg"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":[13]},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"preset_save","name":"preset_save","type":"PDATA","links":null}],"properties":{"Node name for S&R":"sum_load_adv","widget_ue_connectable":{"preset":true,"ckpt_name":true,"unet_name":true,"unet_Weight_Dtype":true,"clip_type":true,"clip1":true,"clip2":true,"guidance":true,"clip3":true,"clip4":true,"vae":true,"lora":true,"lora_strength":true,"width":true,"height":true,"steps":true,"cfg":true,"sampler":true,"scheduler":true,"pos":true,"neg":true}},"widgets_values":["ckpt-sd.toml","AA\\majicMIX realistic _v1.safetensors","None","None","None","None","None","3.5","None","None","A-840000-ema-pruned-real.pt","None",1,512,512,20,8,"euler","normal","beautiful detailed glow,a girl","worst quality, low quality"]},{"id":21,"type":"Mask_Remove_bg","pos":[-799.4154663085938,3144.034912109375],"size":[260,142],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":9},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"threshold","name":"threshold","type":"FLOAT","widget":{"name":"threshold"},"link":null},{"localized_name":"bg_img","name":"bg_img","type":"COMBO","widget":{"name":"bg_img"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[12,27]},{"localized_name":"mask","name":"mask","type":"MASK","links":[28]},{"localized_name":"invert_mask","name":"invert_mask","type":"MASK","links":null},{"localized_name":"alpha_img","name":"alpha_img","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"Mask_Remove_bg","widget_ue_connectable":{"threshold":true,"bg_img":true}},"widgets_values":[0.5,"image"]},{"id":30,"type":"LoadImage","pos":[-802.44189453125,2492.690185546875],"size":[284.0342712402344,326],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[18]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"LoadImage","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["pasted/image (88).png","image"]},{"id":27,"type":"Stack_latent","pos":[-70.43184661865234,3124.070556640625],"size":[315,194],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null},{"localized_name":"pixels","name":"pixels","shape":7,"type":"IMAGE","link":31},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":30},{"localized_name":"noise_mask","name":"noise_mask","shape":7,"type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null},{"localized_name":"diff_difusion","name":"diff_difusion","shape":7,"type":"BOOLEAN","widget":{"name":"diff_difusion"},"link":null},{"localized_name":"smoothness","name":"smoothness","shape":7,"type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"ratio_selected","name":"ratio_selected","shape":7,"type":"COMBO","widget":{"name":"ratio_selected"},"link":null},{"localized_name":"batch_size","name":"batch_size","shape":7,"type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"latent_stack","name":"latent_stack","type":"LATENT_STACK","links":[24]}],"properties":{"Node name for S&R":"Stack_latent","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":[true,4,"None",1,1]},{"id":29,"type":"Stack_IPA","pos":[-392.70281982421875,2495.31396484375],"size":[315,242],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":18},{"localized_name":"attn_mask","name":"attn_mask","shape":7,"type":"MASK","link":null},{"localized_name":"ipa_stack","name":"ipa_stack","shape":7,"type":"IPA_STACK","link":null},{"localized_name":"preset","name":"preset","type":"COMBO","widget":{"name":"preset"},"link":null},{"localized_name":"weight","name":"weight","type":"FLOAT","widget":{"name":"weight"},"link":null},{"localized_name":"weight_type","name":"weight_type","type":"COMBO","widget":{"name":"weight_type"},"link":null},{"localized_name":"combine_embeds","name":"combine_embeds","type":"COMBO","widget":{"name":"combine_embeds"},"link":null},{"localized_name":"start_at","name":"start_at","type":"FLOAT","widget":{"name":"start_at"},"link":null},{"localized_name":"end_at","name":"end_at","type":"FLOAT","widget":{"name":"end_at"},"link":null},{"localized_name":"embeds_scaling","name":"embeds_scaling","type":"COMBO","widget":{"name":"embeds_scaling"},"link":null}],"outputs":[{"localized_name":"ipa_stack","name":"ipa_stack","type":"IPA_STACK","links":[21]}],"properties":{"Node name for S&R":"Stack_IPA","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["PLUS (high strength)",2.0000000000000004,"ease in-out","concat",0,1,"V only"]},{"id":25,"type":"sum_editor","pos":[-96.70258331298828,1663.6717529296875],"size":[265.989501953125,449.3240051269531],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":13},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"clip","name":"clip","shape":7,"type":"CLIP","link":null},{"localized_name":"positive","name":"positive","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","shape":7,"type":"CONDITIONING","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":null},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":null},{"localized_name":"steps","name":"steps","shape":7,"type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","shape":7,"type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler","name":"sampler","shape":7,"type":"COMBO","widget":{"name":"sampler"},"link":null},{"localized_name":"scheduler","name":"scheduler","shape":7,"type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null},{"localized_name":"neg","name":"neg","shape":7,"type":"STRING","widget":{"name":"neg"},"link":null},{"localized_name":"guidance","name":"guidance","shape":7,"type":"FLOAT","widget":{"name":"guidance"},"link":null},{"localized_name":"style","name":"style","shape":7,"type":"COMBO","widget":{"name":"style"},"link":null},{"localized_name":"batch_size","name":"batch_size","shape":7,"type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"ratio_selected","name":"ratio_selected","shape":7,"type":"COMBO","widget":{"name":"ratio_selected"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":[20]},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"vae","name":"vae","type":"VAE","links":null},{"localized_name":"clip","name":"clip","type":"CLIP","links":null},{"localized_name":"image","name":"image","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"sum_editor","widget_ue_connectable":{"steps":true,"cfg":true,"sampler":true,"scheduler":true,"pos":true,"neg":true,"guidance":true,"style":true,"ratio_selected":true,"batch_size":true}},"widgets_values":[0,0,"None","None","a pile of stones","",0,"None",1,"None"]},{"id":31,"type":"sum_stack_all","pos":[541.4401245117188,1663.6717529296875],"size":[260,126],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":20},{"localized_name":"model","name":"model","shape":7,"type":"MODEL","link":null},{"localized_name":"stack_pack","name":"stack_pack","shape":7,"type":"STACK_PACK","link":22},{"localized_name":"正条件","name":"positive","shape":7,"type":"CONDITIONING","link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":[26]},{"localized_name":"model","name":"model","type":"MODEL","links":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null},{"localized_name":"image","name":"image","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"sum_stack_all","widget_ue_connectable":{}},"widgets_values":[]},{"id":34,"type":"basic_Ksampler_simple","pos":[966.6159057617188,1662.45458984375],"size":[397.189697265625,550.6358032226562],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":26},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"image_output","name":"image_output","type":"COMBO","widget":{"name":"image_output"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"image","name":"image","type":"IMAGE","links":null}],"properties":{"Node name for S&R":"basic_Ksampler_simple","widget_ue_connectable":{"seed":true,"denoise":true,"image_output":true}},"widgets_values":[614587559926453,"randomize",1,"Preview"]},{"id":35,"type":"color_Local_Gray","pos":[-443.1391296386719,3151.149169921875],"size":[260,146],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":27},{"localized_name":"mask","name":"mask","type":"MASK","link":28},{"localized_name":"mask_gray","name":"mask_gray","type":"FLOAT","widget":{"name":"mask_gray"},"link":null},{"localized_name":"bj_gray","name":"bj_gray","type":"FLOAT","widget":{"name":"bj_gray"},"link":null},{"localized_name":"smoothness","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null}],"outputs":[{"localized_name":"mask_img","name":"mask_img","type":"IMAGE","links":[]},{"localized_name":"bj_img","name":"bj_img","type":"IMAGE","links":[31]},{"localized_name":"mask","name":"mask","type":"MASK","links":[30]}],"properties":{"Node name for S&R":"color_Local_Gray","widget_ue_connectable":{"mask_gray":true,"bj_gray":true,"smoothness":true}},"widgets_values":[1,1,1]},{"id":32,"type":"stack_sum_pack","pos":[280.766845703125,2840.306640625],"size":[260,186],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"lora_stack","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"ipa_stack","name":"ipa_stack","shape":7,"type":"IPA_STACK","link":21},{"localized_name":"redux_stack","name":"redux_stack","shape":7,"type":"REDUX_STACK","link":null},{"localized_name":"condi_stack","name":"condi_stack","shape":7,"type":"STACK_CONDI","link":null},{"localized_name":"cn_stack","name":"cn_stack","shape":7,"type":"CN_STACK","link":32},{"localized_name":"union_stack","name":"union_stack","shape":7,"type":"UNION_STACK","link":null},{"localized_name":"latent_stack","name":"latent_stack","shape":7,"type":"LATENT_STACK","link":24},{"localized_name":"ipa3堆","name":"ipa3_stack","shape":7,"type":"IPA3_STACK","link":null},{"localized_name":"提示词堆","name":"text_stack","shape":7,"type":"TEXT_STACK","link":null}],"outputs":[{"localized_name":"stack_pack","name":"stack_pack","type":"STACK_PACK","links":[22]}],"properties":{"Node name for S&R":"stack_sum_pack","widget_ue_connectable":{}},"widgets_values":[]},{"id":24,"type":"AIO_Preprocessor","pos":[-806.6650390625,2964.72509765625],"size":[315,82],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":12},{"localized_name":"preprocessor","name":"preprocessor","shape":7,"type":"COMBO","widget":{"name":"preprocessor"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[33]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"83463c2e4b04e729268e57f638b4212e0da4badc","Node name for S&R":"AIO_Preprocessor","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["DepthAnythingPreprocessor",1024]},{"id":36,"type":"Stack_ControlNet","pos":[-291.2275390625,2897.771240234375],"size":[260,150],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":33},{"localized_name":"cn_stack","name":"cn_stack","shape":7,"type":"CN_STACK","link":null},{"localized_name":"controlnet","name":"controlnet","shape":7,"type":"COMBO","widget":{"name":"controlnet"},"link":null},{"localized_name":"strength","name":"strength","shape":7,"type":"FLOAT","widget":{"name":"strength"},"link":null},{"localized_name":"start_percent","name":"start_percent","shape":7,"type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","shape":7,"type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"cn_stack","name":"cn_stack","type":"CN_STACK","links":[32]}],"properties":{"Node name for S&R":"Stack_ControlNet"},"widgets_values":["control_v11f1p_sd15_depth.pth",0.8,0,1]}],"links":[[1,15,0,14,3,"IMAGE"],[2,9,0,14,4,"MASK"],[3,11,0,15,0,"LATENT"],[4,17,0,5,2,"STACK_PACK"],[9,19,0,21,0,"IMAGE"],[12,21,0,24,0,"IMAGE"],[13,22,0,25,0,"RUN_CONTEXT"],[18,30,0,29,0,"IMAGE"],[20,25,0,31,0,"RUN_CONTEXT"],[21,29,0,32,1,"IPA_STACK"],[22,32,0,31,2,"STACK_PACK"],[24,27,0,32,6,"LATENT_STACK"],[26,31,0,34,0,"RUN_CONTEXT"],[27,21,0,35,0,"IMAGE"],[28,21,1,35,1,"MASK"],[30,35,2,27,2,"MASK"],[31,35,1,27,1,"IMAGE"],[32,36,0,32,4,"CN_STACK"],[33,24,0,36,0,"IMAGE"]],"groups":[{"id":1,"title":"sum_latent集成的节点","bounding":[-815.7476196289062,834.944580078125,667.4609375,491.1923828125],"color":"#b58b2a","font_size":60,"flags":{}},{"id":2,"title":"sum_latent","bounding":[-1481.79443359375,837.7703857421875,643.848388671875,494.37939453125],"color":"#3f789e","font_size":60,"flags":{}},{"id":3,"title":"总控","bounding":[-2616.10693359375,1502.4998779296875,1235.8707275390625,692.4526977539062],"color":"#8A8","font_size":60,"flags":{}},{"id":5,"title":"主流程-图像堆","bounding":[-473.063720703125,1539.6717529296875,1866.697998046875,754.705078125],"color":"#3f789e","font_size":60,"flags":{}},{"id":6,"title":"(latent +条件+ipa) 控制流程","bounding":[-1186.127685546875,2368.690185546875,1736.89453125,955.3447265625],"color":"#3f789e","font_size":60,"flags":{}}],"config":{},"extra":{"ue_links":[],"ds":{"scale":0.6830134553650712,"offset":[2110.6159108540032,-2513.2008812698678]},"links_added_by_ue":[]},"version":0.4}