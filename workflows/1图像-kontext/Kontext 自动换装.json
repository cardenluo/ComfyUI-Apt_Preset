{"id":"ea2ddd9f-1390-4ec3-af0e-87277694711b","revision":0,"last_node_id":113,"last_link_id":250,"nodes":[{"id":91,"type":"create_Mask_match_shape","pos":[-14436.486328125,20486.025390625],"size":[260,674.3519287109375],"flags":{},"order":6,"mode":4,"inputs":[{"localized_name":"背景图像","name":"bimg","type":"IMAGE","link":194},{"localized_name":"背景标记","name":"bmask","type":"MASK","link":195},{"localized_name":"前景图像","name":"fimg","shape":7,"type":"IMAGE","link":196},{"localized_name":"前景遮罩","name":"fmask","shape":7,"type":"MASK","link":197},{"localized_name":"标记颜色","name":"b_color","type":"COMBO","widget":{"name":"b_color"},"link":null},{"localized_name":"标记矩形化","name":"b_extrant_to_block","type":"BOOLEAN","widget":{"name":"b_extrant_to_block"},"link":null},{"localized_name":"前景矩形化","name":"f_extrant_to_block","type":"BOOLEAN","widget":{"name":"f_extrant_to_block"},"link":null},{"localized_name":"边界检测","name":"edge_detection","type":"BOOLEAN","widget":{"name":"edge_detection"},"link":null},{"localized_name":"边界厚度","name":"edge_thickness","type":"INT","widget":{"name":"edge_thickness"},"link":null},{"localized_name":"边界颜色","name":"edge_color","type":"COMBO","widget":{"name":"edge_color"},"link":null},{"localized_name":"前景羽化","name":"f_smoothness","type":"INT","widget":{"name":"f_smoothness"},"link":null},{"localized_name":"前景不透明度","name":"f_opacity","type":"FLOAT","widget":{"name":"f_opacity"},"link":null},{"localized_name":"前景X轴偏移","name":"f_x_offset","shape":7,"type":"INT","widget":{"name":"f_x_offset"},"link":null},{"localized_name":"前景Y轴偏移","name":"f_y_offset","shape":7,"type":"INT","widget":{"name":"f_y_offset"},"link":null},{"localized_name":"缩放模式","name":"scale_mode","shape":7,"type":"COMBO","widget":{"name":"scale_mode"},"link":null},{"localized_name":"前景缩放","name":"f_scale","shape":7,"type":"FLOAT","widget":{"name":"f_scale"},"link":null},{"localized_name":"前景旋转","name":"f_rot","shape":7,"type":"INT","widget":{"name":"f_rot"},"link":null},{"localized_name":"图像输出方式","name":"image_output","shape":7,"type":"COMBO","widget":{"name":"image_output"},"link":null}],"outputs":[{"localized_name":"合成图像","name":"composed_image","type":"IMAGE","links":[]},{"localized_name":"新背景图","name":"new_background","type":"IMAGE","links":null},{"localized_name":"前景图层","name":"foreground_layer","type":"IMAGE","links":null},{"localized_name":"图层遮罩","name":"foreground_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"create_Mask_match_shape","widget_ue_connectable":{"b_color":true,"b_extrant_to_block":true,"edge_detection":true,"edge_thickness":true,"edge_color":true,"f_extrant_to_block":true,"f_scale":true,"f_x_offset":true,"f_y_offset":true,"f_rot":true,"f_smoothness":true,"f_opacity":true,"image_output":true}},"widgets_values":["blue",true,false,1,"white",false,1,0,0,0,1,1,"Preview","Preview"]},{"id":87,"type":"LoadImage","pos":[-14788.8349609375,20846.6953125],"size":[270,314],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[196]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[197]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true,"upload":true}},"widgets_values":["easyPreview_temp_bsgod_00001_.png","image"]},{"id":86,"type":"LoadImage","pos":[-14787.6943359375,20486.1875],"size":[270,314],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[194]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[195]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true,"upload":true}},"widgets_values":["easyPreview_temp_cvisq_00001_.png","image"]},{"id":94,"type":"LayerMask: SegformerClothesPipelineLoader","pos":[-15169.2001953125,22536.365234375],"size":[295.1480407714844,466],"flags":{"collapsed":true},"order":2,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"脸","name":"face","type":"BOOLEAN","widget":{"name":"face"},"link":null},{"localized_name":"头发","name":"hair","type":"BOOLEAN","widget":{"name":"hair"},"link":null},{"localized_name":"帽子","name":"hat","type":"BOOLEAN","widget":{"name":"hat"},"link":null},{"localized_name":"太阳镜","name":"sunglass","type":"BOOLEAN","widget":{"name":"sunglass"},"link":null},{"localized_name":"左臂","name":"left_arm","type":"BOOLEAN","widget":{"name":"left_arm"},"link":null},{"localized_name":"右臂","name":"right_arm","type":"BOOLEAN","widget":{"name":"right_arm"},"link":null},{"localized_name":"左腿","name":"left_leg","type":"BOOLEAN","widget":{"name":"left_leg"},"link":null},{"localized_name":"右腿","name":"right_leg","type":"BOOLEAN","widget":{"name":"right_leg"},"link":null},{"localized_name":"左鞋","name":"left_shoe","type":"BOOLEAN","widget":{"name":"left_shoe"},"link":null},{"localized_name":"右鞋","name":"right_shoe","type":"BOOLEAN","widget":{"name":"right_shoe"},"link":null},{"localized_name":"上衣","name":"upper_clothes","type":"BOOLEAN","widget":{"name":"upper_clothes"},"link":null},{"localized_name":"裙子","name":"skirt","type":"BOOLEAN","widget":{"name":"skirt"},"link":null},{"localized_name":"裤子","name":"pants","type":"BOOLEAN","widget":{"name":"pants"},"link":null},{"localized_name":"连衣裙","name":"dress","type":"BOOLEAN","widget":{"name":"dress"},"link":null},{"localized_name":"腰带","name":"belt","type":"BOOLEAN","widget":{"name":"belt"},"link":null},{"localized_name":"包","name":"bag","type":"BOOLEAN","widget":{"name":"bag"},"link":null},{"localized_name":"围巾","name":"scarf","type":"BOOLEAN","widget":{"name":"scarf"},"link":null}],"outputs":[{"localized_name":"segformer_pipeline","name":"segformer_pipeline","type":"SegPipeline","links":[201,236]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"c0fb64d0ebcb81c6c445a8af79ecee24bc3845b0","Node name for S&R":"LayerMask: SegformerClothesPipelineLoader","widget_ue_connectable":{"model":true,"face":true,"hair":true,"hat":true,"sunglass":true,"left_arm":true,"right_arm":true,"left_leg":true,"right_leg":true,"left_shoe":true,"right_shoe":true,"upper_clothes":true,"skirt":true,"pants":true,"dress":true,"belt":true,"bag":true,"scarf":true}},"widgets_values":["segformer_b3_clothes",false,false,false,false,false,false,false,false,false,false,true,true,true,true,true,false,false],"color":"rgba(27, 80, 119, 0.7)"},{"id":2,"type":"sum_load_adv","pos":[-15583.494140625,22087.5703125],"size":[330.3599548339844,591.61962890625],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"覆盖模型","name":"over_model","shape":7,"type":"MODEL","link":null},{"localized_name":"覆盖clip","name":"over_clip","shape":7,"type":"CLIP","link":null},{"localized_name":"lora堆","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"预设","name":"preset","shape":7,"type":"COMBO","widget":{"name":"preset"},"link":null},{"localized_name":"ckpt模型","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"unet模型","name":"unet_name","shape":7,"type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"unet权重类型","name":"unet_Weight_Dtype","shape":7,"type":"COMBO","widget":{"name":"unet_Weight_Dtype"},"link":null},{"localized_name":"clip类型","name":"clip_type","shape":7,"type":"COMBO","widget":{"name":"clip_type"},"link":null},{"localized_name":"clip1","name":"clip1","shape":7,"type":"COMBO","widget":{"name":"clip1"},"link":null},{"localized_name":"clip2","name":"clip2","shape":7,"type":"COMBO","widget":{"name":"clip2"},"link":null},{"localized_name":"引导","name":"guidance","shape":7,"type":"FLOAT","widget":{"name":"guidance"},"link":null},{"localized_name":"clip3","name":"clip3","shape":7,"type":"COMBO","widget":{"name":"clip3"},"link":null},{"localized_name":"clip4","name":"clip4","shape":7,"type":"COMBO","widget":{"name":"clip4"},"link":null},{"localized_name":"VAE","name":"vae","shape":7,"type":"COMBO","widget":{"name":"vae"},"link":null},{"localized_name":"lora","name":"lora","shape":7,"type":"COMBO","widget":{"name":"lora"},"link":null},{"localized_name":"lora强度","name":"lora_strength","shape":7,"type":"FLOAT","widget":{"name":"lora_strength"},"link":null},{"localized_name":"宽度","name":"width","shape":7,"type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"高度","name":"height","shape":7,"type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"步数","name":"steps","shape":7,"type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","shape":7,"type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器","name":"sampler","shape":7,"type":"COMBO","widget":{"name":"sampler"},"link":null},{"localized_name":"调度器","name":"scheduler","shape":7,"type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"正条件","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null},{"localized_name":"负条件","name":"neg","shape":7,"type":"STRING","widget":{"name":"neg"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":[244]},{"localized_name":"模型","name":"model","type":"MODEL","links":null},{"localized_name":"保存预设","name":"preset_save","type":"PDATA","links":null}],"properties":{"Node name for S&R":"sum_load_adv","widget_ue_connectable":{"preset":true,"ckpt_name":true,"unet_name":true,"unet_Weight_Dtype":true,"clip_type":true,"clip1":true,"clip2":true,"guidance":true,"clip3":true,"clip4":true,"vae":true,"lora":true,"lora_strength":true,"width":true,"height":true,"steps":true,"cfg":true,"sampler":true,"scheduler":true,"pos":true,"neg":true}},"widgets_values":["clip2-flux\\clip2-kontext.toml","None","GGUF\\flux1-kontext-dev-Q8_0.gguf","fp8_e4m3fn","flux","clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","10.0","None","None","ae.safetensors","kontext\\place_it.safetensors","1.0","1024","1024",15,"1.0","euler","simple","beautiful detailed glow,a girl","worst quality, low quality"]},{"id":95,"type":"LayerMask: SegformerUltraV2","pos":[-14878.0048828125,22245.1328125],"size":[289.7203063964844,246],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":204},{"localized_name":"Segformer框架","name":"segformer_pipeline","type":"SegPipeline","link":201},{"localized_name":"细节方法","name":"detail_method","type":"COMBO","widget":{"name":"detail_method"},"link":null},{"localized_name":"细节腐蚀","name":"detail_erode","type":"INT","widget":{"name":"detail_erode"},"link":null},{"localized_name":"细节膨胀","name":"detail_dilate","type":"INT","widget":{"name":"detail_dilate"},"link":null},{"localized_name":"黑点","name":"black_point","type":"FLOAT","widget":{"name":"black_point"},"link":null},{"localized_name":"白点","name":"white_point","type":"FLOAT","widget":{"name":"white_point"},"link":null},{"localized_name":"处理细节","name":"process_detail","type":"BOOLEAN","widget":{"name":"process_detail"},"link":null},{"localized_name":"设备","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"最大像素","name":"max_megapixels","type":"FLOAT","widget":{"name":"max_megapixels"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[246]},{"localized_name":"mask","name":"mask","type":"MASK","links":[247]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"c0fb64d0ebcb81c6c445a8af79ecee24bc3845b0","Node name for S&R":"LayerMask: SegformerUltraV2","widget_ue_connectable":{"detail_method":true,"detail_erode":true,"detail_dilate":true,"black_point":true,"white_point":true,"process_detail":true,"device":true,"max_megapixels":true}},"widgets_values":["VITMatte",8,6,0.01,0.99,true,"cuda",2],"color":"rgba(27, 80, 119, 0.7)"},{"id":109,"type":"LayerMask: SegformerUltraV2","pos":[-14881.197265625,22562.513671875],"size":[289.7203063964844,246],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":237},{"localized_name":"Segformer框架","name":"segformer_pipeline","type":"SegPipeline","link":236},{"localized_name":"细节方法","name":"detail_method","type":"COMBO","widget":{"name":"detail_method"},"link":null},{"localized_name":"细节腐蚀","name":"detail_erode","type":"INT","widget":{"name":"detail_erode"},"link":null},{"localized_name":"细节膨胀","name":"detail_dilate","type":"INT","widget":{"name":"detail_dilate"},"link":null},{"localized_name":"黑点","name":"black_point","type":"FLOAT","widget":{"name":"black_point"},"link":null},{"localized_name":"白点","name":"white_point","type":"FLOAT","widget":{"name":"white_point"},"link":null},{"localized_name":"处理细节","name":"process_detail","type":"BOOLEAN","widget":{"name":"process_detail"},"link":null},{"localized_name":"设备","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"最大像素","name":"max_megapixels","type":"FLOAT","widget":{"name":"max_megapixels"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[248]},{"localized_name":"mask","name":"mask","type":"MASK","links":[249]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"c0fb64d0ebcb81c6c445a8af79ecee24bc3845b0","Node name for S&R":"LayerMask: SegformerUltraV2","widget_ue_connectable":{"detail_method":true,"detail_erode":true,"detail_dilate":true,"black_point":true,"white_point":true,"process_detail":true,"device":true,"max_megapixels":true}},"widgets_values":["VITMatte",8,6,0.01,0.99,true,"cuda",2],"color":"rgba(27, 80, 119, 0.7)"},{"id":97,"type":"LoadImage","pos":[-15198.4169921875,22151.2734375],"size":[270,314],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[204]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true,"upload":true}},"widgets_values":["easyPreview_temp_cptae_00001_ (1).png","image"]},{"id":98,"type":"LoadImage","pos":[-15196.8486328125,22581.50390625],"size":[270,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[237]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true,"upload":true}},"widgets_values":["easyPreview_temp_yxypa_00001_.png","image"]},{"id":112,"type":"chx_Ksampler_Kontext","pos":[-14061.91015625,22078.650390625],"size":[260,811.017578125],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":244},{"localized_name":"图像","name":"image","shape":7,"type":"IMAGE","link":250},{"localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"提示词权重","name":"prompt_weight","type":"FLOAT","widget":{"name":"prompt_weight"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"自动调整尺寸","name":"auto_adjust_image","type":"BOOLEAN","widget":{"name":"auto_adjust_image"},"link":null},{"localized_name":"图像输出","name":"image_output","type":"COMBO","widget":{"name":"image_output"},"link":null},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"图像","name":"image","type":"IMAGE","links":null},{"localized_name":"latent","name":"latent","type":"LATENT","links":null}],"properties":{"Node name for S&R":"chx_Ksampler_Kontext","widget_ue_connectable":{"seed":true,"prompt_weight":true,"steps":true,"denoise":true,"auto_adjust_image":true,"image_output":true,"pos":true}},"widgets_values":[23087887980062,"randomize",0.5,15,1,false,"Preview","place it, Remove the solid blue square and ensure that the filling effect after removal matches the surrounding environment. "]},{"id":113,"type":"create_Mask_match_shape","pos":[-14475.61328125,22246.2578125],"size":[260,430],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"背景图像","name":"bimg","type":"IMAGE","link":246},{"localized_name":"背景标记","name":"bmask","type":"MASK","link":247},{"localized_name":"前景图像","name":"fimg","shape":7,"type":"IMAGE","link":248},{"localized_name":"前景遮罩","name":"fmask","shape":7,"type":"MASK","link":249},{"localized_name":"标记颜色","name":"b_color","type":"COMBO","widget":{"name":"b_color"},"link":null},{"localized_name":"标记矩形化","name":"b_extrant_to_block","type":"BOOLEAN","widget":{"name":"b_extrant_to_block"},"link":null},{"localized_name":"前景矩形化","name":"f_extrant_to_block","type":"BOOLEAN","widget":{"name":"f_extrant_to_block"},"link":null},{"localized_name":"边界检测","name":"edge_detection","type":"BOOLEAN","widget":{"name":"edge_detection"},"link":null},{"localized_name":"边界厚度","name":"edge_thickness","type":"INT","widget":{"name":"edge_thickness"},"link":null},{"localized_name":"边界颜色","name":"edge_color","type":"COMBO","widget":{"name":"edge_color"},"link":null},{"localized_name":"前景羽化","name":"f_smoothness","type":"INT","widget":{"name":"f_smoothness"},"link":null},{"localized_name":"前景不透明度","name":"f_opacity","type":"FLOAT","widget":{"name":"f_opacity"},"link":null},{"localized_name":"前景X轴偏移","name":"f_x_offset","shape":7,"type":"INT","widget":{"name":"f_x_offset"},"link":null},{"localized_name":"前景Y轴偏移","name":"f_y_offset","shape":7,"type":"INT","widget":{"name":"f_y_offset"},"link":null},{"localized_name":"缩放模式","name":"scale_mode","shape":7,"type":"COMBO","widget":{"name":"scale_mode"},"link":null},{"localized_name":"前景缩放","name":"f_scale","shape":7,"type":"FLOAT","widget":{"name":"f_scale"},"link":null},{"localized_name":"前景旋转","name":"f_rot","shape":7,"type":"INT","widget":{"name":"f_rot"},"link":null},{"localized_name":"图像输出方式","name":"image_output","shape":7,"type":"COMBO","widget":{"name":"image_output"},"link":null}],"outputs":[{"localized_name":"合成图像","name":"composed_image","type":"IMAGE","links":[250]},{"localized_name":"新背景图","name":"new_background","type":"IMAGE","links":null},{"localized_name":"前景图层","name":"foreground_layer","type":"IMAGE","links":null},{"localized_name":"图层遮罩","name":"foreground_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"create_Mask_match_shape"},"widgets_values":["blue",true,true,false,1,"white",1,1,0,0,"auto-in",1,0,"Preview"]}],"links":[[194,86,0,91,0,"IMAGE"],[195,86,1,91,1,"MASK"],[196,87,0,91,2,"IMAGE"],[197,87,1,91,3,"MASK"],[201,94,0,95,1,"SegPipeline"],[204,97,0,95,0,"IMAGE"],[236,94,0,109,1,"SegPipeline"],[237,98,0,109,0,"IMAGE"],[244,2,0,112,0,"RUN_CONTEXT"],[246,95,0,113,0,"IMAGE"],[247,95,1,113,1,"MASK"],[248,109,0,113,2,"IMAGE"],[249,109,1,113,3,"MASK"],[250,113,0,112,1,"IMAGE"]],"groups":[{"id":2,"title":"迁移-融合","bounding":[-14850.6484375,20363.814453125,676.4765625,814.0859375],"color":"#3f789e","font_size":60,"flags":{}}],"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.7627768444385795,"offset":[16112.398351896405,-21862.787972708782]}},"version":0.4}