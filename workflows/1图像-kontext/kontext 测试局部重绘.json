{"id":"8226c82f-e3e1-4f24-ae9c-90bd316f5d10","revision":0,"last_node_id":181,"last_link_id":420,"nodes":[{"id":154,"type":"create_Mask_visual_tag","pos":[2637.4248046875,782.5189819335938],"size":[260,478],"flags":{},"order":6,"mode":4,"inputs":[{"localized_name":"基础图像","name":"base_image","type":"IMAGE","link":314},{"localized_name":"遮罩","name":"mask","type":"MASK","link":315},{"localized_name":"多遮罩分控","name":"mask_info","shape":7,"type":"MASK_INFO","link":null},{"localized_name":"过滤小遮罩","name":"ignore_threshold","type":"INT","widget":{"name":"ignore_threshold"},"link":null},{"localized_name":"不透明度","name":"opacity","type":"FLOAT","widget":{"name":"opacity"},"link":null},{"localized_name":"轮廓粗细","name":"outline_thickness","type":"INT","widget":{"name":"outline_thickness"},"link":null},{"localized_name":"填充","name":"fill","type":"BOOLEAN","widget":{"name":"fill"},"link":null},{"localized_name":"遮罩模式","name":"mask_mode","type":"COMBO","widget":{"name":"mask_mode"},"link":null},{"localized_name":"边缘羽化","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"输出颜色","name":"out_color","type":"COMBO","widget":{"name":"out_color"},"link":null},{"localized_name":"image_output","name":"image_output","type":"COMBO","widget":{"name":"image_output"},"link":null}],"outputs":[{"localized_name":"图像","name":"image","type":"IMAGE","links":[318]},{"localized_name":"遮罩","name":"mask","type":"MASK","links":[]},{"localized_name":"填充遮罩","name":"fill_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"create_Mask_visual_tag","widget_ue_connectable":{"ignore_threshold":true,"opacity":true,"outline_thickness":true,"fill":true,"mask_mode":true,"smoothness":true,"out_color":true,"image_output":true}},"widgets_values":[0,1,4,true,"方形",1,"white","Preview"]},{"id":155,"type":"chx_Ksampler_Kontext","pos":[3084.1650390625,760.55859375],"size":[355.8996276855469,715.267578125],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":333},{"localized_name":"图像","name":"image","shape":7,"type":"IMAGE","link":318},{"localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"提示词权重","name":"prompt_weight","type":"FLOAT","widget":{"name":"prompt_weight"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"自动调整尺寸","name":"auto_adjust_image","type":"BOOLEAN","widget":{"name":"auto_adjust_image"},"link":null},{"localized_name":"图像输出","name":"image_output","type":"COMBO","widget":{"name":"image_output"},"link":null},{"localized_name":"pos","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"图像","name":"image","type":"IMAGE","links":[319,320]},{"localized_name":"latent","name":"latent","type":"LATENT","links":null}],"properties":{"Node name for S&R":"chx_Ksampler_Kontext","widget_ue_connectable":{"seed":true,"prompt_weight":true,"steps":true,"denoise":true,"auto_adjust_image":true,"image_output":true,"pos":true}},"widgets_values":[0,"fixed",0.5,-1,1,false,"Preview","Remove the white Solid Color Block ,ensure that the filling effect after removal matches the surrounding"]},{"id":153,"type":"PreviewImage","pos":[3599.385009765625,777.2880859375],"size":[582.580322265625,615.6100463867188],"flags":{},"order":10,"mode":4,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":319}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":141,"type":"Image Comparer (rgthree)","pos":[3606.964111328125,1488.928466796875],"size":[566.12646484375,683.177001953125],"flags":{},"order":11,"mode":4,"inputs":[{"name":"image_a","type":"IMAGE","link":null},{"name":"image_b","type":"IMAGE","link":320}],"outputs":[],"properties":{"comparer_mode":"Slide","widget_ue_connectable":{}},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_lnkqd_00037_.png&type=temp&subfolder=&rand=0.8710893231582142"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_lnkqd_00038_.png&type=temp&subfolder=&rand=0.1627509094160171"}]]},{"id":150,"type":"view_bridge_image","pos":[2083.529052734375,784.0218505859375],"size":[383.8894348144531,435.3344421386719],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":null},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"operation","name":"operation","shape":7,"type":"COMBO","widget":{"name":"operation"},"link":null},{"localized_name":"图像更新","name":"image_update","shape":7,"type":"IMAGE_FILE","widget":{"name":"image_update"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[314]},{"localized_name":"mask","name":"mask","type":"MASK","links":[315]}],"properties":{"Node name for S&R":"view_bridge_image","widget_ue_connectable":{"operation":true,"image_update":true}},"widgets_values":["+",null]},{"id":123,"type":"NunchakuFluxDiTLoader","pos":[260.0042724609375,1968.982177734375],"size":[275.7613220214844,202],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_path","name":"model_path","type":"COMBO","widget":{"name":"model_path"},"link":null},{"localized_name":"cache_threshold","name":"cache_threshold","type":"FLOAT","widget":{"name":"cache_threshold"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"cpu_offload","name":"cpu_offload","type":"COMBO","widget":{"name":"cpu_offload"},"link":null},{"localized_name":"device_id","name":"device_id","type":"INT","widget":{"name":"device_id"},"link":null},{"localized_name":"data_type","name":"data_type","type":"COMBO","widget":{"name":"data_type"},"link":null},{"localized_name":"i2f_mode","name":"i2f_mode","shape":7,"type":"COMBO","widget":{"name":"i2f_mode"},"link":null}],"outputs":[{"localized_name":"模型","name":"MODEL","type":"MODEL","links":[346]}],"properties":{"aux_id":"nunchaku-tech/ComfyUI-nunchaku","ver":"3f538e249dd0e00d9f2bae7ff816bfec9a58a8da","Node name for S&R":"NunchakuFluxDiTLoader","widget_ue_connectable":{"model_path":true,"cache_threshold":true,"attention":true,"cpu_offload":true,"device_id":true,"data_type":true,"i2f_mode":true}},"widgets_values":["svdq-int4_r32-flux.1-kontext-dev.safetensors",0,"nunchaku-fp16","auto",0,"bfloat16","enabled"]},{"id":1,"type":"sum_load_adv","pos":[664.3589477539062,1970.6878662109375],"size":[323.1735534667969,611.44482421875],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"覆盖模型","name":"over_model","shape":7,"type":"MODEL","link":346},{"localized_name":"覆盖clip","name":"over_clip","shape":7,"type":"CLIP","link":null},{"localized_name":"lora堆","name":"lora_stack","shape":7,"type":"LORASTACK","link":null},{"localized_name":"预设","name":"preset","shape":7,"type":"COMBO","widget":{"name":"preset"},"link":null},{"localized_name":"ckpt模型","name":"ckpt_name","shape":7,"type":"COMBO","widget":{"name":"ckpt_name"},"link":null},{"localized_name":"unet模型","name":"unet_name","shape":7,"type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"unet权重类型","name":"unet_Weight_Dtype","shape":7,"type":"COMBO","widget":{"name":"unet_Weight_Dtype"},"link":null},{"localized_name":"clip类型","name":"clip_type","shape":7,"type":"COMBO","widget":{"name":"clip_type"},"link":null},{"localized_name":"clip1","name":"clip1","shape":7,"type":"COMBO","widget":{"name":"clip1"},"link":null},{"localized_name":"clip2","name":"clip2","shape":7,"type":"COMBO","widget":{"name":"clip2"},"link":null},{"localized_name":"引导","name":"guidance","shape":7,"type":"FLOAT","widget":{"name":"guidance"},"link":null},{"localized_name":"clip3","name":"clip3","shape":7,"type":"COMBO","widget":{"name":"clip3"},"link":null},{"localized_name":"clip4","name":"clip4","shape":7,"type":"COMBO","widget":{"name":"clip4"},"link":null},{"localized_name":"VAE","name":"vae","shape":7,"type":"COMBO","widget":{"name":"vae"},"link":null},{"localized_name":"lora","name":"lora","shape":7,"type":"COMBO","widget":{"name":"lora"},"link":null},{"localized_name":"lora强度","name":"lora_strength","shape":7,"type":"FLOAT","widget":{"name":"lora_strength"},"link":null},{"localized_name":"宽度","name":"width","shape":7,"type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"高度","name":"height","shape":7,"type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"步数","name":"steps","shape":7,"type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","shape":7,"type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器","name":"sampler","shape":7,"type":"COMBO","widget":{"name":"sampler"},"link":null},{"localized_name":"调度器","name":"scheduler","shape":7,"type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"正条件","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null},{"localized_name":"负条件","name":"neg","shape":7,"type":"STRING","widget":{"name":"neg"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":[333,407]},{"localized_name":"模型","name":"model","type":"MODEL","links":null},{"localized_name":"保存预设","name":"preset_save","type":"PDATA","links":null}],"properties":{"Node name for S&R":"sum_load_adv","widget_ue_connectable":{"preset":true,"ckpt_name":true,"unet_name":true,"unet_Weight_Dtype":true,"clip_type":true,"clip1":true,"clip2":true,"guidance":true,"clip3":true,"clip4":true,"vae":true,"lora":true,"lora_strength":true,"width":true,"height":true,"steps":true,"cfg":true,"sampler":true,"scheduler":true,"pos":true,"neg":true}},"widgets_values":["clip2-flux\\clip2-kontext.toml","None","GGUF\\flux1-kontext-dev-Q8_0.gguf","fp8_e4m3fn","flux","clip_l.safetensors","t5xxl_fp8_e4m3fn.safetensors","10.0","None","None","ae.safetensors","None","1.0","1024","1024","15","1.0","euler","simple","beautiful detailed glow,a girl","worst quality, low quality"]},{"id":158,"type":"Image Comparer (rgthree)","pos":[3026.800048828125,2060.505615234375],"size":[351.33642578125,535.276611328125],"flags":{},"order":14,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":419},{"name":"image_b","type":"IMAGE","link":371}],"outputs":[],"properties":{"comparer_mode":"Slide","widget_ue_connectable":{}},"widgets_values":[[{"name":"A","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ihopc_00007_.png&type=temp&subfolder=&rand=0.7761361595651798"},{"name":"B","selected":true,"url":"/api/view?filename=rgthree.compare._temp_ihopc_00008_.png&type=temp&subfolder=&rand=0.762645181618304"}]]},{"id":180,"type":"Stack_pre_Mark","pos":[1789.949951171875,2232.30908203125],"size":[260,226],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"遮罩模式","name":"mask_mode","type":"COMBO","widget":{"name":"mask_mode"},"link":null},{"localized_name":"平滑度","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"遮罩扩展","name":"mask_expand","type":"INT","widget":{"name":"mask_expand"},"link":null},{"localized_name":"遮罩最小值","name":"mask_min","type":"FLOAT","widget":{"name":"mask_min"},"link":null},{"localized_name":"遮罩最大值","name":"mask_max","type":"FLOAT","widget":{"name":"mask_max"},"link":null},{"localized_name":"裁切宽度扩展","name":"expand_width","type":"INT","widget":{"name":"expand_width"},"link":null},{"localized_name":"裁切高度扩展","name":"expand_height","type":"INT","widget":{"name":"expand_height"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null}],"outputs":[{"localized_name":"mask_stack","name":"mask_stack","type":"MASK_STACK","links":[]}],"properties":{"Node name for S&R":"Stack_pre_Mark","widget_ue_connectable":{"mask_mode":true,"smoothness":true,"mask_expand":true,"mask_min":true,"mask_max":true,"expand_width":true,"expand_height":true,"divisible_by":true}},"widgets_values":["fill",10,0,0,1,0,0,8]},{"id":178,"type":"Image_transform_layer","pos":[2654.797607421875,1986.748046875],"size":[260,382],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"背景图像","name":"bj_img","shape":7,"type":"IMAGE","link":410},{"localized_name":"前景图像","name":"fj_img","shape":7,"type":"IMAGE","link":411},{"localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":412},{"localized_name":"位置","name":"stitch","shape":7,"type":"STITCH2","link":413},{"localized_name":"mask_expand","name":"mask_expand","type":"INT","widget":{"name":"mask_expand"},"link":null},{"localized_name":"羽化","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"X偏移量","name":"x_offset","type":"INT","widget":{"name":"x_offset"},"link":null},{"localized_name":"Y偏移量","name":"y_offset","type":"INT","widget":{"name":"y_offset"},"link":null},{"localized_name":"旋转角度","name":"rotation","type":"FLOAT","widget":{"name":"rotation"},"link":null},{"localized_name":"缩放比例","name":"scale","type":"FLOAT","widget":{"name":"scale"},"link":null},{"localized_name":"边缘检测","name":"edge_detection","type":"BOOLEAN","widget":{"name":"edge_detection"},"link":null},{"localized_name":"边缘厚度","name":"edge_thickness","type":"INT","widget":{"name":"edge_thickness"},"link":null},{"localized_name":"边缘颜色","name":"edge_color","type":"COMBO","widget":{"name":"edge_color"},"link":null},{"localized_name":"不透明度","name":"opacity","type":"FLOAT","widget":{"name":"opacity"},"link":null},{"localized_name":"混合模式","name":"blending_mode","type":"COMBO","widget":{"name":"blending_mode"},"link":null},{"localized_name":"混合强度","name":"blend_strength","type":"FLOAT","widget":{"name":"blend_strength"},"link":null}],"outputs":[{"localized_name":"合成图像","name":"composite","type":"IMAGE","links":[419]},{"localized_name":"合成遮罩","name":"mask","type":"MASK","links":null},{"localized_name":"线条遮罩","name":"line_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"Image_transform_layer","widget_ue_connectable":{"mask_expand":true,"smoothness":true,"x_offset":true,"y_offset":true,"rotation":true,"scale":true,"edge_detection":true,"edge_thickness":true,"edge_color":true,"opacity":true,"blending_mode":true,"blend_strength":true}},"widgets_values":[0,0,0,0,0,1,false,1,"black",1,"normal",1]},{"id":181,"type":"PreviewImage","pos":[2464.68408203125,2211.14111328125],"size":[140,246],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":417}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":140,"type":"view_Data","pos":[1999.333984375,3246.300537109375],"size":[830.6580200195312,188.8667755126953],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"任意","name":"any","shape":7,"type":"*","link":null},{"localized_name":"数据","name":"data","shape":7,"type":"STRING","widget":{"name":"data"},"link":null}],"outputs":[{"localized_name":"桥接输入","name":"bridge_input","type":"*","links":null}],"properties":{"Node name for S&R":"view_Data","widget_ue_connectable":{"data":true}},"widgets_values":["① 原句：Turn {object}  into {effect} material\n② 中文释义：将 {指定物体 } 的纹理修改为 {指定纹理} \n③ 打标模式：支持 \n④ 可替换内容：{object}、{effect} \n⑤ 示例：将画面中墙面的纹理修改为大理石纹理"]},{"id":139,"type":"view_Data","pos":[1998.0361328125,2835.38134765625],"size":[550.1133422851562,346.3075256347656],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"任意","name":"any","shape":7,"type":"*","link":null},{"localized_name":"数据","name":"data","shape":7,"type":"STRING","widget":{"name":"data"},"link":null}],"outputs":[{"localized_name":"桥接输入","name":"bridge_input","type":"*","links":null}],"properties":{"Node name for S&R":"view_Data","widget_ue_connectable":{"data":true}},"widgets_values":["Transform the hat into a pile of green leaves"]},{"id":54,"type":"LoadImage","pos":[1327.87255859375,2091.177978515625],"size":[294.7934875488281,512.3175659179688],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[371,409]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[420]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.42","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true,"upload":true}},"widgets_values":["clipspace/clipspace-mask-446712.6000000015.png [input]","image"]},{"id":177,"type":"chx_Ksampler_inpaint","pos":[2152.8759765625,1969.9110107421875],"size":[262.2296447753906,380],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","link":407},{"localized_name":"图像","name":"image","type":"IMAGE","link":409},{"localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":420},{"localized_name":"遮罩控制","name":"mask_stack","shape":7,"type":"MASK_STACK","link":null},{"localized_name":"采样控制","name":"sample_stack","shape":7,"type":"SAMPLE_STACK","link":null},{"localized_name":"种子","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"kontext提示词权重","name":"prompt_weight","type":"FLOAT","widget":{"name":"prompt_weight"},"link":null},{"localized_name":"降噪强度","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"工作模式","name":"work_pattern","type":"COMBO","widget":{"name":"work_pattern"},"link":null},{"localized_name":"遮罩采样","name":"mask_sampling","type":"BOOLEAN","widget":{"name":"mask_sampling"},"link":null},{"localized_name":"裁切模式","name":"crop_mode","type":"COMBO","widget":{"name":"crop_mode"},"link":null},{"localized_name":"裁切尺寸","name":"crop_value","type":"INT","widget":{"name":"crop_value"},"link":null},{"localized_name":"正向提示词","name":"pos","shape":7,"type":"STRING","widget":{"name":"pos"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"RUN_CONTEXT","links":null},{"localized_name":"背景图像","name":"bj_image","type":"IMAGE","links":[410]},{"localized_name":"生成图像","name":"image","type":"IMAGE","links":[411]},{"localized_name":"裁切遮罩","name":"cropped_mask","type":"MASK","links":[412]},{"localized_name":"裁切位置","name":"stitch","type":"STITCH2","links":[413]},{"localized_name":"采样原图","name":"cropped_image","type":"IMAGE","links":[417]}],"properties":{"Node name for S&R":"chx_Ksampler_inpaint","widget_ue_connectable":{"seed":true,"prompt_weight":true,"denoise":true,"work_pattern":true,"mask_sampling":true,"crop_mode":true,"crop_value":true,"pos":true}},"widgets_values":[336724326574692,"fixed",0.5,1,"kontext采样",true,"设置裁切图_宽度",768,""]}],"links":[[314,150,0,154,0,"IMAGE"],[315,150,1,154,1,"MASK"],[318,154,0,155,1,"IMAGE"],[319,155,1,153,0,"IMAGE"],[320,155,1,141,1,"IMAGE"],[333,1,0,155,0,"RUN_CONTEXT"],[346,123,0,1,0,"MODEL"],[371,54,0,158,1,"IMAGE"],[407,1,0,177,0,"RUN_CONTEXT"],[409,54,0,177,1,"IMAGE"],[410,177,1,178,0,"IMAGE"],[411,177,2,178,1,"IMAGE"],[412,177,3,178,2,"MASK"],[413,177,4,178,3,"STITCH2"],[417,177,5,181,0,"IMAGE"],[419,178,0,158,0,"IMAGE"],[420,54,1,177,2,"MASK"]],"groups":[{"id":5,"title":"案例1","bounding":[1087.5435791015625,1882.814697265625,2398.389892578125,850.6878662109375],"color":"#3f789e","font_size":24,"flags":{}},{"id":9,"title":"开启加速","bounding":[250.0042724609375,1895.382080078125,295.7613525390625,285.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Group","bounding":[1443.4359130859375,2755.16064453125,1527.169189453125,773.0789794921875],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7400249944258531,"offset":[-692.7409879319813,-2265.632308068362]},"ue_links":[],"links_added_by_ue":[]},"version":0.4}