{"id":"1bdf3102-d885-48d7-a81a-c39d859ff290","revision":0,"last_node_id":243,"last_link_id":498,"nodes":[{"id":233,"type":"LoadImage","pos":[-9218.6181640625,4094.210693359375],"size":[270,314.000244140625],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[484]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[487]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-painted-masked-2316188.png [input]","image"]},{"id":226,"type":"create_Mask_match_shape","pos":[-8731.5009765625,4145.552734375],"size":[260,642],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"背景图像","name":"bimg","type":"IMAGE","link":484},{"localized_name":"背景标记","name":"bmask","type":"MASK","link":487},{"localized_name":"前景图像","name":"fimg","shape":7,"type":"IMAGE","link":485},{"localized_name":"前景遮罩","name":"fmask","shape":7,"type":"MASK","link":486},{"localized_name":"标记颜色","name":"b_color","type":"COMBO","widget":{"name":"b_color"},"link":null},{"localized_name":"标记矩形化","name":"b_extrant_to_block","type":"BOOLEAN","widget":{"name":"b_extrant_to_block"},"link":null},{"localized_name":"前景矩形化","name":"f_extrant_to_block","type":"BOOLEAN","widget":{"name":"f_extrant_to_block"},"link":null},{"localized_name":"边界检测","name":"edge_detection","type":"BOOLEAN","widget":{"name":"edge_detection"},"link":null},{"localized_name":"边界厚度","name":"edge_thickness","type":"INT","widget":{"name":"edge_thickness"},"link":null},{"localized_name":"边界颜色","name":"edge_color","type":"COMBO","widget":{"name":"edge_color"},"link":null},{"localized_name":"前景羽化","name":"f_smoothness","type":"INT","widget":{"name":"f_smoothness"},"link":null},{"localized_name":"前景不透明度","name":"f_opacity","type":"FLOAT","widget":{"name":"f_opacity"},"link":null},{"localized_name":"前景X轴偏移","name":"f_x_offset","shape":7,"type":"INT","widget":{"name":"f_x_offset"},"link":null},{"localized_name":"前景Y轴偏移","name":"f_y_offset","shape":7,"type":"INT","widget":{"name":"f_y_offset"},"link":null},{"localized_name":"缩放模式","name":"scale_mode","shape":7,"type":"COMBO","widget":{"name":"scale_mode"},"link":null},{"localized_name":"前景缩放","name":"f_scale","shape":7,"type":"FLOAT","widget":{"name":"f_scale"},"link":null},{"localized_name":"前景旋转","name":"f_rot","shape":7,"type":"INT","widget":{"name":"f_rot"},"link":null},{"localized_name":"图像输出方式","name":"image_output","shape":7,"type":"COMBO","widget":{"name":"image_output"},"link":null}],"outputs":[{"localized_name":"合成图像","name":"composed_image","type":"IMAGE","links":[488]},{"localized_name":"新背景图","name":"new_background","type":"IMAGE","links":null},{"localized_name":"前景图层","name":"foreground_layer","type":"IMAGE","links":null},{"localized_name":"图层遮罩","name":"foreground_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"create_Mask_match_shape"},"widgets_values":["blue",false,false,false,1,"white",1,1,0,0,"auto-in",1,0,"Preview"]},{"id":235,"type":"PreviewImage","pos":[-8378.203125,4159.17578125],"size":[284.7201843261719,366.1078796386719],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"图像","name":"images","type":"IMAGE","link":488}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":237,"type":"stack_Mask2color","pos":[-8715.2158203125,5101.1953125],"size":[260,322],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"1遮罩模式","name":"mask_mode1","type":"COMBO","widget":{"name":"mask_mode1"},"link":null},{"localized_name":"1填充","name":"fill1","type":"BOOLEAN","widget":{"name":"fill1"},"link":null},{"localized_name":"1遮罩颜色","name":"mask1_color","type":"COMBO","widget":{"name":"mask1_color"},"link":null},{"localized_name":"1轮廓厚度","name":"outline_thickness1","type":"INT","widget":{"name":"outline_thickness1"},"link":null},{"localized_name":"2遮罩模式","name":"mask_mode2","type":"COMBO","widget":{"name":"mask_mode2"},"link":null},{"localized_name":"2填充","name":"fill2","type":"BOOLEAN","widget":{"name":"fill2"},"link":null},{"localized_name":"2遮罩颜色","name":"mask2_color","type":"COMBO","widget":{"name":"mask2_color"},"link":null},{"localized_name":"2轮廓厚度","name":"outline_thickness2","type":"INT","widget":{"name":"outline_thickness2"},"link":null},{"localized_name":"3遮罩模式","name":"mask_mode3","type":"COMBO","widget":{"name":"mask_mode3"},"link":null},{"localized_name":"3填充","name":"fill3","type":"BOOLEAN","widget":{"name":"fill3"},"link":null},{"localized_name":"3轮廓厚度","name":"outline_thickness3","type":"INT","widget":{"name":"outline_thickness3"},"link":null},{"localized_name":"3遮罩颜色","name":"mask3_color","type":"COMBO","widget":{"name":"mask3_color"},"link":null}],"outputs":[{"localized_name":"多遮罩分控","name":"mask_info","type":"MASK_INFO","links":[491]}],"properties":{"Node name for S&R":"stack_Mask2color"},"widgets_values":["圆形",true,"Blue",3,"方形",true,"Green",3,"原始",true,3,"Default"]},{"id":225,"type":"create_Mask_visual_tag","pos":[-8373.0576171875,4966.47119140625],"size":[260,478],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"基础图像","name":"base_image","type":"IMAGE","link":489},{"localized_name":"遮罩","name":"mask","type":"MASK","link":490},{"localized_name":"多遮罩分控","name":"mask_info","shape":7,"type":"MASK_INFO","link":491},{"localized_name":"过滤小遮罩","name":"ignore_threshold","type":"INT","widget":{"name":"ignore_threshold"},"link":null},{"localized_name":"不透明度","name":"opacity","type":"FLOAT","widget":{"name":"opacity"},"link":null},{"localized_name":"轮廓粗细","name":"outline_thickness","type":"INT","widget":{"name":"outline_thickness"},"link":null},{"localized_name":"填充","name":"fill","type":"BOOLEAN","widget":{"name":"fill"},"link":null},{"localized_name":"遮罩模式","name":"mask_mode","type":"COMBO","widget":{"name":"mask_mode"},"link":null},{"localized_name":"边缘羽化","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"输出颜色","name":"out_color","type":"COMBO","widget":{"name":"out_color"},"link":null},{"localized_name":"image_output","name":"image_output","type":"COMBO","widget":{"name":"image_output"},"link":null}],"outputs":[{"localized_name":"图像","name":"image","type":"IMAGE","links":[]},{"localized_name":"遮罩","name":"mask","type":"MASK","links":null},{"localized_name":"填充遮罩","name":"fill_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"create_Mask_visual_tag"},"widgets_values":[0,1,3,true,"原始",0,"colorful","Preview"]},{"id":234,"type":"LoadImage","pos":[-9218.560546875,4459.82275390625],"size":[270,314],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[485]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[486]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-painted-masked-2322259.png [input]","image"]},{"id":236,"type":"LoadImage","pos":[-9209.9775390625,4959.8740234375],"size":[270,314],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[489]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":[490,494]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-painted-masked-2370559.png [input]","image"]},{"id":229,"type":"Mask_split_mulMask","pos":[-8738.189453125,5598.63720703125],"size":[260,138],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"遮罩","name":"mask","type":"MASK","link":494},{"localized_name":"忽略阈值","name":"ignore_threshold","type":"INT","widget":{"name":"ignore_threshold"},"link":null}],"outputs":[{"localized_name":"mask1","name":"mask1","type":"MASK","links":[495]},{"localized_name":"mask2","name":"mask2","type":"MASK","links":null},{"localized_name":"mask3","name":"mask3","type":"MASK","links":null},{"localized_name":"mask4","name":"mask4","type":"MASK","links":null},{"localized_name":"rest_mask","name":"rest_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"Mask_split_mulMask"},"widgets_values":[0]},{"id":240,"type":"MaskPreview","pos":[-8324.5830078125,5561.18798828125],"size":[140,246],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":495}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"MaskPreview"},"widgets_values":[]},{"id":230,"type":"Mask_splitMask_by_color","pos":[-7527.041015625,4113.09912109375],"size":[260,246],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":493},{"localized_name":"红色阈值","name":"threshold_r","type":"FLOAT","widget":{"name":"threshold_r"},"link":null},{"localized_name":"绿色阈值","name":"threshold_g","type":"FLOAT","widget":{"name":"threshold_g"},"link":null},{"localized_name":"蓝色阈值","name":"threshold_b","type":"FLOAT","widget":{"name":"threshold_b"},"link":null}],"outputs":[{"localized_name":"red","name":"red","type":"MASK","links":[496]},{"localized_name":"green","name":"green","type":"MASK","links":null},{"localized_name":"blue","name":"blue","type":"MASK","links":null},{"localized_name":"cyan","name":"cyan","type":"MASK","links":null},{"localized_name":"magenta","name":"magenta","type":"MASK","links":null},{"localized_name":"yellow","name":"yellow","type":"MASK","links":null},{"localized_name":"black","name":"black","type":"MASK","links":null},{"localized_name":"white","name":"white","type":"MASK","links":null}],"properties":{"Node name for S&R":"Mask_splitMask_by_color"},"widgets_values":[0.15,0.15,0.15]},{"id":241,"type":"MaskPreview","pos":[-7001.86669921875,4113.09912109375],"size":[140,246.000244140625],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":496}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"MaskPreview"},"widgets_values":[]},{"id":239,"type":"LoadImage","pos":[-7902.45556640625,4113.09912109375],"size":[270,314.000244140625],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[493]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI-Photoshop/clipspace-ComfyUI-Photoshop-2619276.5.png [input]","image"]},{"id":242,"type":"LoadImage","pos":[-7904.412109375,4478.54150390625],"size":[270,314],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[497]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage"},"widgets_values":["20240729 (198).png","image"]},{"id":227,"type":"Mask_image2mask","pos":[-7504.2939453125,4478.54150390625],"size":[260,270],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":497},{"localized_name":"遮罩类型","name":"mask_type","type":"COMBO","widget":{"name":"mask_type"},"link":null},{"localized_name":"白平衡低阈值","name":"WB_low_threshold","type":"INT","widget":{"name":"WB_low_threshold"},"link":null},{"localized_name":"白平衡高阈值","name":"WB_high_threshold","type":"INT","widget":{"name":"WB_high_threshold"},"link":null},{"localized_name":"颜色","name":"color","type":"STRING","widget":{"name":"color"},"link":null},{"localized_name":"颜色阈值","name":"color_threshold","type":"INT","widget":{"name":"color_threshold"},"link":null},{"localized_name":"通道","name":"channel","type":"COMBO","widget":{"name":"channel"},"link":null},{"localized_name":"深度","name":"depth","type":"FLOAT","widget":{"name":"depth"},"link":null},{"localized_name":"模糊半径","name":"blur_radius","type":"INT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"扩展","name":"expand","type":"INT","widget":{"name":"expand"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[498]},{"localized_name":"invert_mask","name":"invert_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"Mask_image2mask"},"widgets_values":["White_Balance",1,255,"#000000",10,"red",0.2,1,0]},{"id":243,"type":"MaskPreview","pos":[-7062.39013671875,4478.54150390625],"size":[140,246],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":498}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"MaskPreview"},"widgets_values":[]},{"id":231,"type":"Mask_transform_sum","pos":[-7851.54296875,5005.40771484375],"size":[260,414],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"基础图像","name":"base_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"背景模式","name":"bg_mode","type":"COMBO","widget":{"name":"bg_mode"},"link":null},{"localized_name":"遮罩模式","name":"mask_mode","type":"COMBO","widget":{"name":"mask_mode"},"link":null},{"localized_name":"忽略阈值","name":"ignore_threshold","type":"INT","widget":{"name":"ignore_threshold"},"link":null},{"localized_name":"不透明度","name":"opacity","type":"FLOAT","widget":{"name":"opacity"},"link":null},{"localized_name":"轮廓厚度","name":"outline_thickness","type":"INT","widget":{"name":"outline_thickness"},"link":null},{"localized_name":"平滑度","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"遮罩扩展","name":"mask_expand","type":"INT","widget":{"name":"mask_expand"},"link":null},{"localized_name":"锥形边角","name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"},"link":null},{"localized_name":"遮罩最小值","name":"mask_min","type":"FLOAT","widget":{"name":"mask_min"},"link":null},{"localized_name":"遮罩最大值","name":"mask_max","type":"FLOAT","widget":{"name":"mask_max"},"link":null},{"localized_name":"裁切至遮罩","name":"crop_to_mask","type":"BOOLEAN","widget":{"name":"crop_to_mask"},"link":null},{"localized_name":"裁切扩展宽度","name":"expand_width","type":"INT","widget":{"name":"expand_width"},"link":null},{"localized_name":"裁切扩展高度","name":"expand_height","type":"INT","widget":{"name":"expand_height"},"link":null},{"localized_name":"裁切重缩放","name":"rescale_crop","type":"FLOAT","widget":{"name":"rescale_crop"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null}],"outputs":[{"localized_name":"图像","name":"image","type":"IMAGE","links":null},{"localized_name":"遮罩","name":"mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"Mask_transform_sum"},"widgets_values":["crop_image","original",0,1,3,0,0,true,0,1,false,0,0,1,8]},{"id":232,"type":"Mask_simple_adjust","pos":[-7516.9912109375,4996.56201171875],"size":[260,130],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"遮罩","name":"input_mask","type":"MASK","link":null},{"localized_name":"平滑度","name":"smoothness","type":"INT","widget":{"name":"smoothness"},"link":null},{"localized_name":"遮罩扩展","name":"mask_expand","type":"INT","widget":{"name":"mask_expand"},"link":null},{"localized_name":"是否填充","name":"is_fill","type":"BOOLEAN","widget":{"name":"is_fill"},"link":null},{"localized_name":"是否反转","name":"is_invert","type":"BOOLEAN","widget":{"name":"is_invert"},"link":null}],"outputs":[{"localized_name":"遮罩","name":"processed_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"Mask_simple_adjust"},"widgets_values":[0,0,false,false]},{"id":228,"type":"Mask_Remove_bg","pos":[-7521.21435546875,5234.27685546875],"size":[260,146],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":null},{"localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"阈值","name":"threshold","type":"FLOAT","widget":{"name":"threshold"},"link":null},{"localized_name":"背景图像","name":"bg_img","type":"COMBO","widget":{"name":"bg_img"},"link":null},{"localized_name":"rem_mode","name":"rem_mode","type":"COMBO","widget":{"name":"rem_mode"},"link":null}],"outputs":[{"localized_name":"图像","name":"image","type":"IMAGE","links":null},{"localized_name":"主体遮罩","name":"mask","type":"MASK","links":null},{"localized_name":"背景遮罩","name":"invert_mask","type":"MASK","links":null}],"properties":{"Node name for S&R":"Mask_Remove_bg"},"widgets_values":[0.5,"Alpha","RMBG-1.4"]}],"links":[[484,233,0,226,0,"IMAGE"],[485,234,0,226,2,"IMAGE"],[486,234,1,226,3,"MASK"],[487,233,1,226,1,"MASK"],[488,226,0,235,0,"IMAGE"],[489,236,0,225,0,"IMAGE"],[490,236,1,225,1,"MASK"],[491,237,0,225,2,"MASK_INFO"],[493,239,0,230,0,"IMAGE"],[494,236,1,229,0,"MASK"],[495,229,0,240,0,"MASK"],[496,230,0,241,0,"MASK"],[497,242,0,227,0,"IMAGE"],[498,227,0,243,0,"MASK"]],"groups":[{"id":6,"title":"用遮罩制作图片标记","bounding":[-9228.6181640625,4020.610595703125,1145.13525390625,1796.5772705078125],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"色相抠图","bounding":[-7914.412109375,4039.498779296875,1062.54541015625,763.0426025390625],"color":"#3f789e","font_size":24,"flags":{}},{"id":8,"title":"常用工具","bounding":[-7861.54296875,4922.9619140625,614.5517578125,506.4457092285156],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.6727499949325647,"offset":[9412.756233685834,-4657.6237644144485]},"frontendVersion":"1.23.4","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[],"links_added_by_ue":[]},"version":0.4}